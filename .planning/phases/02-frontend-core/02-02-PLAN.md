---
phase: 02-frontend-core
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - frontend/src/components/Header.tsx
  - frontend/src/components/ProgressBar.tsx
  - frontend/src/components/FormSection.tsx
  - frontend/src/components/FormQuestion.tsx
  - frontend/src/app/page.tsx
autonomous: true

must_haves:
  truths:
    - "User sees all 5 form sections with their questions"
    - "User sees progress bar showing section completion"
    - "Each question has appropriate input type (text, number, select, textarea, checkbox)"
    - "Each question has a help button that can be clicked"
    - "Form inputs update the Zustand store when changed"
  artifacts:
    - path: "frontend/src/components/Header.tsx"
      provides: "App header with logo and tagline"
      min_lines: 15
    - path: "frontend/src/components/ProgressBar.tsx"
      provides: "Visual progress indicator for section completion"
      min_lines: 20
    - path: "frontend/src/components/FormSection.tsx"
      provides: "Collapsible section container for questions"
      min_lines: 30
    - path: "frontend/src/components/FormQuestion.tsx"
      provides: "Individual question with input and help button"
      min_lines: 60
  key_links:
    - from: "frontend/src/components/FormQuestion.tsx"
      to: "frontend/src/store/formStore.ts"
      via: "useFormStore hook"
      pattern: "useFormStore"
    - from: "frontend/src/components/FormQuestion.tsx"
      to: "setActiveQuestion"
      via: "help button onClick"
      pattern: "setActiveQuestion.*question\\.id"
    - from: "frontend/src/app/page.tsx"
      to: "frontend/src/data/ontarioWorksForm.ts"
      via: "import and render sections"
      pattern: "ontarioWorksForm\\.sections\\.map"
---

<objective>
Build form UI components: Header with branding, ProgressBar for section completion, FormSection for collapsible sections, and FormQuestion for individual inputs with help buttons.

Purpose: Create the form display that users will interact with, showing all Ontario Works questions with appropriate input types and help access.
Output: Complete form UI displaying all 5 sections with working inputs and help buttons.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-frontend-core/02-01-SUMMARY.md
@frontend/src/types/index.ts
@frontend/src/store/formStore.ts
@frontend/src/data/ontarioWorksForm.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Header and ProgressBar components</name>
  <files>
    frontend/src/components/Header.tsx
    frontend/src/components/ProgressBar.tsx
  </files>
  <action>
    1. Create frontend/src/components/Header.tsx:

    ```tsx
    import { FileText } from 'lucide-react';

    export function Header() {
      return (
        <header className="bg-white border-b border-gray-200 px-6 py-4">
          <div className="max-w-4xl mx-auto flex items-center gap-3">
            <div className="bg-blue-600 p-2 rounded-lg">
              <FileText className="w-6 h-6 text-white" />
            </div>
            <div>
              <h1 className="text-xl font-bold text-gray-900">FormBridge</h1>
              <p className="text-sm text-gray-500">Ontario Works Application Assistant</p>
            </div>
          </div>
        </header>
      );
    }
    ```

    2. Create frontend/src/components/ProgressBar.tsx:

    ```tsx
    import { useFormStore } from '@/store/formStore';
    import { FormSection } from '@/types';
    import { CheckCircle, Circle } from 'lucide-react';

    interface ProgressBarProps {
      sections: FormSection[];
    }

    export function ProgressBar({ sections }: ProgressBarProps) {
      const completedSections = useFormStore((state) => state.completedSections);

      const completedCount = completedSections.length;
      const totalCount = sections.length;
      const progressPercent = totalCount > 0 ? (completedCount / totalCount) * 100 : 0;

      return (
        <div className="bg-white border-b border-gray-200 px-6 py-4">
          <div className="max-w-4xl mx-auto">
            <div className="flex items-center justify-between mb-2">
              <span className="text-sm font-medium text-gray-700">
                Progress: {completedCount} of {totalCount} sections complete
              </span>
              <span className="text-sm text-gray-500">{Math.round(progressPercent)}%</span>
            </div>

            <div className="w-full bg-gray-200 rounded-full h-2 mb-4">
              <div
                className="bg-blue-600 h-2 rounded-full transition-all duration-300"
                style={{ width: `${progressPercent}%` }}
              />
            </div>

            <div className="flex justify-between">
              {sections.map((section, index) => {
                const isComplete = completedSections.includes(section.id);
                return (
                  <div key={section.id} className="flex flex-col items-center">
                    {isComplete ? (
                      <CheckCircle className="w-5 h-5 text-green-600" />
                    ) : (
                      <Circle className="w-5 h-5 text-gray-300" />
                    )}
                    <span className={`text-xs mt-1 ${isComplete ? 'text-green-600' : 'text-gray-400'}`}>
                      {index + 1}
                    </span>
                  </div>
                );
              })}
            </div>
          </div>
        </div>
      );
    }
    ```
  </action>
  <verify>
    cd frontend && npx tsc --noEmit
  </verify>
  <done>
    Header displays FormBridge branding, ProgressBar shows section completion with visual indicators
  </done>
</task>

<task type="auto">
  <name>Task 2: Create FormSection and FormQuestion components</name>
  <files>
    frontend/src/components/FormSection.tsx
    frontend/src/components/FormQuestion.tsx
  </files>
  <action>
    1. Create frontend/src/components/FormSection.tsx:

    ```tsx
    'use client';

    import { useState } from 'react';
    import { FormSection as FormSectionType } from '@/types';
    import { FormQuestion } from './FormQuestion';
    import { ChevronDown, ChevronUp } from 'lucide-react';

    interface FormSectionProps {
      section: FormSectionType;
      sectionNumber: number;
      onHelpClick: (questionId: string) => void;
    }

    export function FormSection({ section, sectionNumber, onHelpClick }: FormSectionProps) {
      const [isExpanded, setIsExpanded] = useState(true);

      return (
        <div className="bg-white rounded-lg shadow-sm border border-gray-200 mb-4">
          <button
            onClick={() => setIsExpanded(!isExpanded)}
            className="w-full px-6 py-4 flex items-center justify-between text-left hover:bg-gray-50 transition-colors"
          >
            <div>
              <div className="flex items-center gap-2">
                <span className="bg-blue-100 text-blue-700 text-sm font-medium px-2 py-1 rounded">
                  Section {sectionNumber}
                </span>
                <h2 className="text-lg font-semibold text-gray-900">{section.title}</h2>
              </div>
              {section.description && (
                <p className="text-sm text-gray-500 mt-1">{section.description}</p>
              )}
            </div>
            {isExpanded ? (
              <ChevronUp className="w-5 h-5 text-gray-400" />
            ) : (
              <ChevronDown className="w-5 h-5 text-gray-400" />
            )}
          </button>

          {isExpanded && (
            <div className="px-6 pb-6 space-y-6">
              {section.questions.map((question) => (
                <FormQuestion
                  key={question.id}
                  question={question}
                  onHelpClick={() => onHelpClick(question.id)}
                />
              ))}
            </div>
          )}
        </div>
      );
    }
    ```

    2. Create frontend/src/components/FormQuestion.tsx:

    ```tsx
    'use client';

    import { useFormStore } from '@/store/formStore';
    import { FormQuestion as FormQuestionType } from '@/types';
    import { HelpCircle } from 'lucide-react';

    interface FormQuestionProps {
      question: FormQuestionType;
      onHelpClick: () => void;
    }

    export function FormQuestion({ question, onHelpClick }: FormQuestionProps) {
      const answers = useFormStore((state) => state.answers);
      const setAnswer = useFormStore((state) => state.setAnswer);

      const value = answers[question.fieldId] ?? '';

      const handleChange = (newValue: string | number | boolean) => {
        setAnswer(question.fieldId, newValue);
      };

      const renderInput = () => {
        switch (question.fieldType) {
          case 'select':
            return (
              <select
                value={value as string}
                onChange={(e) => handleChange(e.target.value)}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"
              >
                <option value="">Select an option...</option>
                {question.options?.map((option) => (
                  <option key={option} value={option}>
                    {option}
                  </option>
                ))}
              </select>
            );

          case 'textarea':
            return (
              <textarea
                value={value as string}
                onChange={(e) => handleChange(e.target.value)}
                rows={3}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"
                placeholder="Enter your response..."
              />
            );

          case 'number':
            return (
              <input
                type="number"
                value={value as string}
                onChange={(e) => handleChange(e.target.value ? Number(e.target.value) : '')}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                placeholder="Enter a number..."
                min={0}
              />
            );

          case 'checkbox':
            return (
              <label className="flex items-start gap-3 cursor-pointer">
                <input
                  type="checkbox"
                  checked={Boolean(value)}
                  onChange={(e) => handleChange(e.target.checked)}
                  className="mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                />
                <span className="text-gray-700">{question.originalText}</span>
              </label>
            );

          case 'text':
          default:
            return (
              <input
                type="text"
                value={value as string}
                onChange={(e) => handleChange(e.target.value)}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                placeholder="Enter your response..."
              />
            );
        }
      };

      return (
        <div className="space-y-2">
          <div className="flex items-start justify-between gap-4">
            {question.fieldType !== 'checkbox' && (
              <label className="block text-gray-800 font-medium">
                {question.originalText}
                {question.required && <span className="text-red-500 ml-1">*</span>}
              </label>
            )}
            <button
              onClick={onHelpClick}
              className="flex-shrink-0 p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-full transition-colors"
              title="Get help with this question"
              aria-label="Get help with this question"
            >
              <HelpCircle className="w-5 h-5" />
            </button>
          </div>

          {renderInput()}
        </div>
      );
    }
    ```
  </action>
  <verify>
    cd frontend && npx tsc --noEmit
  </verify>
  <done>
    FormSection renders collapsible sections, FormQuestion renders appropriate input types with help buttons
  </done>
</task>

<task type="auto">
  <name>Task 3: Integrate components into main page</name>
  <files>
    frontend/src/app/page.tsx
  </files>
  <action>
    Update frontend/src/app/page.tsx to use all components:

    ```tsx
    'use client';

    import { Header } from '@/components/Header';
    import { ProgressBar } from '@/components/ProgressBar';
    import { FormSection } from '@/components/FormSection';
    import { ontarioWorksForm } from '@/data/ontarioWorksForm';
    import { useFormStore } from '@/store/formStore';

    export default function Home() {
      const setActiveQuestion = useFormStore((state) => state.setActiveQuestion);
      const activeQuestionId = useFormStore((state) => state.activeQuestionId);

      const handleHelpClick = (questionId: string) => {
        setActiveQuestion(questionId);
        // Chat panel will be added in 02-03
        console.log('Help requested for question:', questionId);
      };

      return (
        <div className="min-h-screen bg-gray-50">
          <Header />
          <ProgressBar sections={ontarioWorksForm.sections} />

          <main className="max-w-4xl mx-auto px-6 py-8">
            <div className="mb-6">
              <h2 className="text-2xl font-bold text-gray-900">{ontarioWorksForm.name}</h2>
              <p className="text-gray-600 mt-1">{ontarioWorksForm.description}</p>
            </div>

            {ontarioWorksForm.sections.map((section, index) => (
              <FormSection
                key={section.id}
                section={section}
                sectionNumber={index + 1}
                onHelpClick={handleHelpClick}
              />
            ))}

            {/* Placeholder for chat panel - will be positioned here in 02-03 */}
            {activeQuestionId && (
              <div className="fixed bottom-4 right-4 bg-white p-4 rounded-lg shadow-lg border border-gray-200">
                <p className="text-sm text-gray-600">Chat panel will appear here</p>
                <p className="text-xs text-gray-400 mt-1">Active: {activeQuestionId}</p>
                <button
                  onClick={() => setActiveQuestion(null)}
                  className="mt-2 text-sm text-blue-600 hover:text-blue-800"
                >
                  Close
                </button>
              </div>
            )}
          </main>
        </div>
      );
    }
    ```
  </action>
  <verify>
    cd frontend && npm run build
  </verify>
  <done>
    Main page renders all 5 sections with questions, help buttons set activeQuestionId in store
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npm run dev` - page loads without errors
2. All 5 sections visible: Eligibility, Household, Income, Housing, Review
3. Each question shows appropriate input type (select, text, number, textarea, checkbox)
4. Clicking help button on any question shows placeholder panel
5. Form inputs can be changed and store updates (check React DevTools or console)
</verification>

<success_criteria>
- Header shows FormBridge branding with icon
- Progress bar displays 0/5 sections complete
- All 5 sections render with collapsible UI
- All question types render correctly (select, text, number, textarea, checkbox)
- Help buttons are visible on every question
- Clicking help button updates activeQuestionId in Zustand store
- Form inputs update Zustand store answers when changed
</success_criteria>

<output>
After completion, create `.planning/phases/02-frontend-core/02-02-SUMMARY.md`
</output>
